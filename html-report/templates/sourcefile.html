{% extends "layout.html" %}
{% block head %}
<style>
  html, body {
    margin: 0;
    width: 100%;
    height: 100%;
    overflow: hidden;
  }
  .header {
    padding-left: 24px;
  }
  .container {
    width: 100%;
    height: 100%;
    overflow: auto;
    display: flex;
    flex-direction: column;
  }
  div.pre {
    height: calc(100% - 100px);
    width: 100%;
    box-shadow: 0px 0px 1px 1px #cccccc;
    padding: 0;
    box-sizing: border-box;
    overflow-x: auto;
  }
  .source-code {
    padding: 8px 80px;
  }
  @keyframes highlight {
    0% {
      background-color: #ff8880;
    }
    100% {
      background-color: #ffcccc;
    }
  }
  .highlight {
    animation: highlight 1.5s;
  }

  @media only screen and (max-width: 660px) {
    .source-code {
      padding: 8px 0;
    }
  }
</style>
<script type="text/javascript">
  $(function () {
    /*
    $("div.line-with-errors").click(function() {
      $("div.errors", this).slideToggle(200)
    })
    */
    $('div.line-with-errors div.errors').show()
    
    // jump to `linno` if specified
    // for example: 2-buffer-overflow.c.html?lineno=148 will then jump to line 148
    var match = window.location.search.match(/\?lineno=(\d+)/)
    if (match) {
      var lineno = match[1]
      // var $el = $('.line-with-errors.line-' + lineno)
      var $el = $('.line-' + lineno)
      if ($el.length) {
        $el.addClass('highlight')
        var el = $el[0]
        el.scrollIntoView()
        $('.errors', $el).show()
        var container = $('.container')[0]
        if (container) {
          container.scrollTop = Math.max(0, (container.scrollTop - container.offsetHeight * 0.382))
        }
      }
    }
  });
</script>
{% endblock %}
{% block title %}{{filename}}{% endblock %}
{% block content %}
<div class="container">
  <div class="header">
      <h1><a href="{{output_dir}}/index.html"><img alt="Report Index" class="breadcrumb" src="{{output_dir}}/static/rv_logo.png"/> RV Toolkit Error Report</a> &nbsp;&rsaquo; &nbsp; {{filename}}</h1>
  </div>
  <div class="source-code">
  {{ code|highlight(errorlines, fileid)|safe }}
  </div>
</div>
{% endblock %}