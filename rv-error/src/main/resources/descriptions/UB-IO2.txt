According to ISO C11, it is undefined behavior to use file stream functionality in stdio.h to perform a stream output operation followed by an input operation on the same stream without an intervening call to a file positioning function (such as fsetpos), or to fflush. In practice this may lead to incorrect and inconsistent program state with respect to the file and ultimately leave the file on disk corrupted with incorrect data or cause the program to read incorrect data from the file. The correct solution is to either use a file stream only for reading, only for writing, or follow all sequences of output operations with a file positioning function or flush function prior to calling any input operations on the stream.
