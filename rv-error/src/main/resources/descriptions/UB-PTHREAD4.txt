According to POSIX 2008, it is undefined behavior to lock a mutex initialized with PTHREAD_MUTEX_DEFAULT in a thread in which the mutex is already locked. In practice this can lead to deadlocking the thread and preventing program execution from continuing. The solution when attempting to lock a mutex that may already be locked by the current thread is to either use a PTHREAD_MUTEX_ERRORCHECK or PTHREAD_MUTEX_RECURSIVE mutex, or else call pthread_mutex_trylock in order to avoi undefined behavior if the mutex is already locked by the current thread.
