According to ISO C11, it is undefined behavior to use file stream functionality in stdio.h to perform a stream input operation followed by an output operation on the same stream without an intervening call to a file positioning function (such as fsetpos). In practice this may lead to incorrect and inconsistent program state with respect to the file and ultimately leave the file on disk corrupted with incorrect data or cause the program to read incorrect data from the file. The correct solution is to either use a file stream only for reading, only for writing, or follow all sequences of input operations with a file positioning function prior to calling any output operations on the stream.
