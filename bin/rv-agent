#!/usr/bin/env sh
if [[ -z "$RV_TEST_DIR" ]]; then
  echo "User did not defined the root directory of program to test." 
  echo "Will use the default (benchmarks + tests)" 
  RV_BENCH_BIN=benchmarks/bin
  RV_TEST_BIN=tests/bin
  PROGRAM_CLASSPATH=$RV_BENCH_BIN:$RV_TEST_BIN
else
  echo "User defined the root directory of program to test ($RV_TEST_DIR)" 
  PROGRAM_CLASSPATH=$RV_TEST_DIR
fi
RV_AGENT_BIN=$(dirname $0)/../lib/rv-predict-agent.jar
JAVA_AGENT_LIB=$(dirname $0)/../lib/iagent.jar

#agent logging
echo "logging "$@
time java -Xmx32g -javaagent:$JAVA_AGENT_LIB -cp $RV_AGENT_BIN:$PROGRAM_CLASSPATH $@
